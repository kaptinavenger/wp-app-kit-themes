define(["jquery","core/theme-app","core/theme-tpl-tags","core/modules/storage","theme/js/bootstrap.min","theme/js/auth/auth-pages","theme/js/auth/simple-login","theme/js/auth/premium-posts","theme/js/comments"],function(e,t,n,o){function i(){var t=e(".navbar-toggle").eq(0);t.hasClass("collapsed")||t.click()}function a(){window.scrollTo(0,0)}function c(e){window.open(e,"_blank","location=yes")}var r=e("#refresh-button");r.click(function(e){e.preventDefault(),i(),t.refresh()}),t.on("refresh:start",function(){r.addClass("refreshing")}),t.on("refresh:end",function(t){a(),o.clear("scroll-pos"),r.removeClass("refreshing"),t.ok?e("#feedback").removeClass("error").html("Content updated successfully :)").slideDown():e("#feedback").addClass("error").html(t.message).slideDown()}),t.on("error",function(t){e("#feedback").addClass("error").html(t.message).slideDown()}),e("body").click(function(t){e("#feedback").slideUp()});var s=e("#go-back");t.on("screen:showed",function(){var e=t.getBackButtonDisplay();"show"===e?(r.hide(),s.show()):"hide"===e&&(s.hide(),r.show())}),s.click(function(e){e.preventDefault(),t.navigateToPreviousScreen()}),e("#container").on("click","li.media",function(n){n.preventDefault();var o=e("a",this).attr("href");t.navigate(o)}),e("#navbar-collapse").on("click","a",function(e){i()}),e("#container").on("click",".single-content a, .page-content a",function(e){e.preventDefault(),c(e.target.href)}),e("#container").on("click",".comments",function(n){n.preventDefault(),e("#waiting").show(),t.displayPostComments(e(this).attr("data-post-id"),function(e,t,n){},function(t){e("#waiting").hide()})}),e("#container").on("click",".get-more",function(n){n.preventDefault();var o=e(this),r=o.text();o.attr("disabled","disabled").text("Loading..."),t.getMoreComponentItems(function(){o.removeAttr("disabled")},function(e,t){o.removeAttr("disabled").text(r)})}),t.on("screen:leave",function(t,n,r){"list"==t.screen_type&&o.set("scroll-pos",t.fragment,e("body").scrollTop())}),t.on("screen:showed",function(t,n){if("list"==t.screen_type){var r=o.get("scroll-pos",t.fragment);null!==r?e("body").scrollTop(r):a()}else a();"comments"==t.screen_type&&e("#waiting").hide()})});
define(["jquery","core/theme-app","core/modules/storage","theme/js/transitions","theme/js/bootstrap.min"],function(e,n,t,o){function i(){var n=e(".navbar-toggle").eq(0);n.hasClass("collapsed")||n.click()}function a(){window.scrollTo(0,0)}function c(e){window.open(e,"_blank","location=yes")}n.setParam("custom-screen-rendering",!0),n.action("screen-transition",function(e,t,r,s,i,a){var c=n.getTransitionDirection(s,i);switch(c){case"previous-screen":o.slidePreviousScreen(e,t,r,a);break;case"next-screen":o.slideNextScreen(e,t,r,a);break;case"default":o["default"](e,t,r,a);break;default:o["default"](e,t,r,a)}});var r=e("#refresh-button");r.click(function(e){e.preventDefault(),i(),n.refresh()}),n.on("refresh:start",function(){r.addClass("refreshing")}),n.on("refresh:end",function(n){a(),t.clear("scroll-pos"),r.removeClass("refreshing"),n.ok?e("#feedback").removeClass("error").html("Content updated successfully :)").slideDown():e("#feedback").addClass("error").html(n.message).slideDown()}),n.on("error",function(n){e("#feedback").addClass("error").html(n.message).slideDown()}),e("body").click(function(n){e("#feedback").slideUp()});var s=e("#go-back");n.on("screen:showed",function(){var e=n.getBackButtonDisplay();"show"===e?(r.hide(),s.show()):"hide"===e&&(s.hide(),r.show())}),s.click(function(e){e.preventDefault(),n.navigateToPreviousScreen()}),e("#container").on("click","li.media",function(t){t.preventDefault();var o=e("a",this).attr("href");n.navigate(o)}),e("#navbar-collapse").on("click","a",function(e){i()}),e("#container").on("click",".single-content a, .page-content a",function(e){e.preventDefault(),c(e.target.href)}),e("#container").on("click",".comments",function(t){t.preventDefault(),e("#waiting").show(),n.displayPostComments(e(this).attr("data-post-id"),function(e,n,t){},function(n){e("#waiting").hide()})}),e("#container").on("click",".get-more",function(t){t.preventDefault();var o=e(this),r=o.text();o.attr("disabled","disabled").text("Loading..."),n.getMoreComponentItems(function(){o.removeAttr("disabled")},function(e,n){o.removeAttr("disabled").text(r)})}),n.on("screen:leave",function(n,o,r){"list"==n.screen_type&&t.set("scroll-pos",n.fragment,e("body").scrollTop())}),n.on("screen:showed",function(n,o){if("list"==n.screen_type){var r=t.get("scroll-pos",n.fragment);null!==r?e("body").scrollTop(r):a()}else a();"comments"==n.screen_type&&e("#waiting").hide()})});
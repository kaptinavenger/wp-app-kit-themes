define(["jquery","core/theme-app","core/modules/authentication"],function(e,t,n){e('<div class="clearfix"><div class="clearfix pull-right" id="user-info"></div></div>').insertAfter("#feedback");var o=e("#user-info"),a=function(){var e=n.getCurrentUser();e?o.html('Logged in as <a href="#user-page">'+e.login+'</a> <button type="button" class="btn btn-danger" id="logout">Log out</button>'):o.html('No user connected <button type="button" class="btn btn-info" id="login">Log in</button>')};a(),t.on("info",function(e){switch(e.event){case"auth:user-login":case"auth:user-logout":a()}}),e(o).on("click","#login",function(e){e.preventDefault(),o.html('<input id="userlogin" placeholder="Login" type="text" ><input id="userpass" placeholder="Password" type="password" ><button type="button" class="btn btn-info" id="go-login">Log in</button>')}),e(o).on("click","#go-login",function(t){t.preventDefault(),n.logUserIn(e("#userlogin").val(),e("#userpass").val())}),e(o).on("click","#logout",function(e){e.preventDefault(),n.logUserOut()})});